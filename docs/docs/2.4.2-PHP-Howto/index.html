<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>PHP - Themis 0.9</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Themis 0.9</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Introduction</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">How to use <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../2.-How-to-use-Themis/">Intro</a>
                        </li>
                    
                        <li >
                            <a href="../2.1-Building-and-installing/">Building and installing</a>
                        </li>
                    
                        <li >
                            <a href="../2.2-Objects-reference/">Objects reference</a>
                        </li>
                    
                        <li >
                            <a href="../2.3-Key-management/">Key management advice</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Language reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../2.4-Language-reference/">Intro</a>
                        </li>
                    
                        <li >
                            <a href="../2.4.1-Python-Howto/">Python</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">PHP</a>
                        </li>
                    
                        <li >
                            <a href="../2.4.3-Ruby-Howto/">Ruby</a>
                        </li>
                    
                        <li >
                            <a href="../2.4.4-Objective-C-Howto/">Objective C</a>
                        </li>
                    
                        <li >
                            <a href="../2.4.5-Java---Android/">Java/Android</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../3.-FAQ/">FAQ</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Fundamentals <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../4.1-General-design-principles/">General design principles</a>
                        </li>
                    
                        <li >
                            <a href="../4.2-Architecture/">Architecture</a>
                        </li>
                    
                        <li >
                            <a href="../4.3-Soter-cryptostack/">Soter cryptostack</a>
                        </li>
                    
                        <li >
                            <a href="../4.4-Cryptosystems/">Cryptosystems</a>
                        </li>
                    
                        <li >
                            <a href="../4.4.1-Secure-message/">Secure Message</a>
                        </li>
                    
                        <li >
                            <a href="../4.4.2-Secure-Session/">Secure Session</a>
                        </li>
                    
                        <li >
                            <a href="../4.4.3-Secure-Cell/">Secure Cell</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../5.-Contributing-to-Themis/">Intro</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing  <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../5.1-Development-status/">Development roadmap</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contributing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../5.2-Getting-started-with-development/">Getting started with development</a>
                        </li>
                    
                        <li >
                            <a href="../5.3-Directory-structure/">Directory structure</a>
                        </li>
                    
                        <li >
                            <a href="../5.4-Implementation-details/">Some implementation details</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
           <ul class="nav navbar-nav navbar-right">

                
                <li>
                    <a href="https://github.com/cossacklabs/themis/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#php">PHP</a></li>
        
            <li><a href="#installation">Installation</a></li>
        
            <li><a href="#usage">Usage</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="php">PHP</h1>
<h2 id="installation">Installation</h2>
<p>To install Themis for PHP, go to Themis source directory and type:</p>
<pre><code>make phpthemis_install
</code></pre>
<p>this will build phpthemis.so extension for php. Now add this to php.ini:</p>
<pre><code>extension=phpthemis.so
</code></pre>
<p>You're ready to go.</p>
<h2 id="usage">Usage</h2>
<h3 id="key-pair-generation">Key Pair Generation</h3>
<p>Themis supports Elliptic Curve and RSA algorithms for asymmetric cryptography</p>
<pre><code>$key_pair = phpthemis_gen_ec_key_pair(); # or phpthemis_gen_rsa_key_pair(); for RSA
$private_key = $key_pair['private_key'];
$public_key = $key_pair['public_key'];
</code></pre>
<h3 id="secure-message">Secure Message</h3>
<p>Encrypt message:</p>
<pre><code>$encrypted_message = phpthemis_secure_message_wrap($private_key, $peer_public_key, message);
if (is_null($encrypted_message)){
      #error is occured
}
</code></pre>
<p>Decrypt message:</p>
<pre><code>$decrypted_message = phpthemis_secure_message_unwrap($private_key, $peer_public_key, encrypted_message);
if (is_null($decrypted_message)){
      #error is occured
}
</code></pre>
<h3 id="secure-cell">Secure Cell</h3>
<p>All Secure Cell modes has an optional parameter <code>context</code>. For detailed explanation of various modes and their strengths and weaknesses, see <a href="../2.2-Objects-reference/">objects guide</a> and <a href="../4.4.3-Secure-Cell/">cryptosystem description for Secure Cell</a>.</p>
<h4 id="seal-mode">Seal Mode</h4>
<p>Encrypt</p>
<pre><code>$encrypted_message = phpthemis_scell_full_encrypt($password, $message, $context);
</code></pre>
<p>Decrypt</p>
<pre><code>$decrypted_message = phpthemis_scell_full_decrypt($password, $encrypted_message, $context);
</code></pre>
<h4 id="token-protect-mode">Token-protect Mode</h4>
<p>Encrypt</p>
<pre><code>$encrypted_message, $additional_auth_data = phpthemis_scell_auto_split_encrypt($password, $message, $context);
</code></pre>
<p>Decrypt</p>
<pre><code>message = phpthemis_scell_auto_split_decrypt([$encrypted_message, $additional_auth_data], $context);
</code></pre>
<h4 id="context-imprint-mode">Context-Imprint Mode</h4>
<p>Encrypt</p>
<pre><code>$encrypted_message = phpthemis_scell_user_split_encrypt($message, $context);
</code></pre>
<p>Decrypt</p>
<pre><code>message = phpthemis_scell_user_split_decrypt($encrypted_message, $context);
</code></pre>
<h3 id="secure-session">Secure Session</h3>
<p>Themis Sesure Session bindings for PHP are included in phpthemis extension. But typical architecture of PHP applications (PHP script is invoked by Apache per every request) does not allow to organize secure interaction for session setup. Secure session object can not be serialized and stored before session establishing process was completed. </p>
<p>However, if you are using standalone / daemonized PHP applications, you might still try to use Secure Session at your own discretion.</p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<p>(c) 2015 Cossack Labs Limited</p>
		
		<p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
	</footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>